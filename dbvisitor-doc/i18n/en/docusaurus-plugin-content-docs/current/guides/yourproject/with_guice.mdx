---
id: with_guice
sidebar_position: 6
hide_table_of_contents: true
title: 3.6 Guice Integration
description: Using dbVisitor ORM with Guice.
---
:::tip[Hint]
This article is generated by AI translation.
:::

import TagRed from '@site/src/components/tags/TagRed';
import TagGray from '@site/src/components/tags/TagGray';
import Vars from '@site/plugins/projectVars';

export const Highlight = ({children, color}) => (
  <span style={{ backgroundColor: color, borderRadius: '2px', color: '#fff', padding: '0.2rem', }}>{children}</span>
);

## What is Guice
Guice is Googleâ€™s lightweight dependency injection library. Spring offers DI plus many other features; if you just need DI, Guice is a good fit.

- Guice project: https://github.com/google/guice

## dbvisitor-guice Features

- Auto-configured data sources
- Annotation-based transactions
- Mapper interface injection
- Multiple data sources

## How to use

First add the dependency, current version: <Highlight color="rgb(227 17 108)">{Vars.lastReleaseVer}</Highlight>

```xml title='Maven Dependencies'
<dependency>
  <groupId>net.hasor</groupId>
  <artifactId>dbvisitor-guice</artifactId>
  <version>latest version</version>
</dependency>
```

```xml title='Use HikariCP'
<dependency>
    <groupId>com.zaxxer</groupId>
    <artifactId>HikariCP</artifactId>
    <version>4.0.3</version>
</dependency>
```

```properties title='Configuration'
# using HikariCP
dbvisitor.jdbc-ds=com.zaxxer.hikari.HikariDataSource
dbvisitor.jdbc-ds.jdbc-url=jdbc:mysql://127.0.0.1:13306/devtester?allowMultiQueries=true
dbvisitor.jdbc-ds.username=root
dbvisitor.jdbc-ds.password=123456
dbvisitor.jdbc-ds.minimum-idle=5
dbvisitor.jdbc-ds.maximum-pool-size=12
dbvisitor.jdbc-ds.max-lifetime=1200000
dbvisitor.jdbc-ds.auto-commit=true
dbvisitor.jdbc-ds.connection-timeout=20000
dbvisitor.mapper-locations=classpath:dbvisitor/mapper/*.xml
dbvisitor.mapper-packages=net.hasor.dbvisitor.test.dao
```

```java title='Inject a Mapper'
public class ServiceTest {
    @Inject
    private UserMapper userMapper;
    ...
}
```

```java title='Start Guice'
// Load configuration
Properties properties = new Properties();
properties.load(ResourcesUtils.getResourceAsStream("jdbc.properties"));

// Initialize Guice and load the DbVisitorModule
Injector injector = Guice.createInjector(new DbVisitorModule(properties));

// Enjoy
ServiceTest service = injector.getInstance(ServiceTest.class);
...
```

:::info[Example]
[Example project](https://gitee.com/zycgit/dbvisitor/tree/main/dbvisitor-example/guice/)
:::

## Registered types {#inject}

- `JdbcOperations` interface, implemented by [JdbcTemplate](../core/jdbc/about)
- `LambdaOperations` interface, implemented by [LambdaTemplate](../core/lambda/about)
- `TransactionManager` interface for [programmatic](../transaction/manager/program) transactions
- `TransactionTemplate` interface for [template](../transaction/manager/template) transactions
- `Configuration`
- `Session`
- `Custom Mapper` interfaces

## Configuration reference

| Key                                 | Description                                                                                                                                   |
|-------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------|
| dbvisitor.mapper-locations          | <TagGray/> Locations of Mapper XML files; default `dbvisitor/mapper/*.xml`                                                                     |
| dbvisitor.mapper-packages           | <TagGray/> Packages to scan for Mapper interfaces; separate multiple with `,`                                                                   |
| dbvisitor.mapper-disabled           | <TagGray/> `true/false` to disable Mapper interfaces discovered via `dbvisitor.mapper-packages`; default false. Set true if conflicts arise.     |
| dbvisitor.marker-annotation         | <TagGray/> Annotation that marks an interface as a Mapper; default `net.hasor.dbvisitor.mapper.MapperDef`                                       |
| dbvisitor.marker-interface          | <TagGray/> Interface that marks an interface as a Mapper; default `net.hasor.dbvisitor.mapper.Mapper`                                          |
| dbvisitor.auto-mapping              | <TagGray/> Automatically map all fields to columns; true = auto, false = require @Column                                                        |
| dbvisitor.camel-case                | <TagGray/> Convert table/column names using camel-case to underscore                                                                           |
| dbvisitor.use-delimited             | <TagGray/> Force identifier quoting for table/column/index names (e.g., when names are keywords); default false                                |
| dbvisitor.case-insensitive          | <TagGray/> Case-insensitive table/column names; default true                                                                                   |
| dbvisitor.ignore-nonexist-statement | <TagGray/> Ignore missing mappings when binding Mapper methods to XML; default false (throws)                                                  |
| dbvisitor.dialect                   | <TagGray/> Default database dialect                                                                                                            |
