---
id: with_hasor
sidebar_position: 5
hide_table_of_contents: true
title: 3.5 Hasor Integration
description: Integration of dbVisitor ORM tool and Hasor.
---
import TagRed from '@site/src/components/tags/TagRed';
import TagGray from '@site/src/components/tags/TagGray';
import Vars from '@site/plugins/projectVars';

export const Highlight = ({children, color}) => (
  <span style={{ backgroundColor: color, borderRadius: '2px', color: '#fff', padding: '0.2rem', }}>{children}</span>
);

## What is Hasor
Hasor is a project similar to Spring, providing IoC/Aop and Web development. It is smaller than Spring and richer than Guice.

- Hasor Project URL: https://www.hasor.net/

## Features

- Auto-configure Datasource
- Annotation-based Transaction Control
- Mapper Interface Injection
- Multi-datasource Support

## How to Use

First, add the dependency, current version: <Highlight color="rgb(227 17 108)">{Vars.lastReleaseVer}</Highlight>

```xml title='Maven Dependency'
<dependency>
    <groupId>net.hasor</groupId>
    <artifactId>dbvisitor-hasor</artifactId>
    <version>latest version</version>
</dependency>
```

```xml title='Using HikariCP as Database Connection Pool'
<dependency>
    <groupId>com.zaxxer</groupId>
    <artifactId>HikariCP</artifactId>
    <version>4.0.3</version>
</dependency>
```

```properties title='Configuration File'
dbvisitor.jdbc-ds=com.zaxxer.hikari.HikariDataSource
dbvisitor.jdbc-ds.jdbc-url=jdbc:mysql://127.0.0.1:13306/devtester?allowMultiQueries=true
dbvisitor.jdbc-ds.username=root
dbvisitor.jdbc-ds.password=123456
dbvisitor.jdbc-ds.minimum-idle=5
dbvisitor.jdbc-ds.maximum-pool-size=12
dbvisitor.jdbc-ds.max-lifetime=1200000
dbvisitor.jdbc-ds.auto-commit=true
dbvisitor.jdbc-ds.connection-timeout=20000
dbvisitor.mapper-locations=classpath:dbvisitor/mapper/*.xml
dbvisitor.mapper-packages=net.hasor.dbvisitor.test.dao
```

```java title='Inject Mapper'
public class ServiceTest {
  @Inject
  private UserMapper userMapper;
    ...
}

public interface UserMapper extends BaseMapper<UserDTO> {
    ...
}
```

```java title='Start Hasor'
// Initialize Hasor and load DbVisitorModule plugin
AppContext appContext = Hasor.create().mainSettingWith("jdbc.properties").build(binder -> {
    binder.installModule(new DbVisitorModule());
});

// Enjoy
ServiceTest service = appContext.getInstance(ServiceTest.class);
...
```

:::info[Example]
[Example Project](https://gitee.com/zycgit/dbvisitor/tree/main/dbvisitor-example/hasor/)
:::

## Registered Types {#inject}

- JdbcOperations interface, [JdbcTemplate](../core/jdbc/about) is its implementation
- LambdaOperations interface, [LambdaTemplate](../core/lambda/about) is its implementation
- TransactionManager interface, interface for developing [Programmatic](../transaction/manager/program) transactions
- TransactionTemplate interface, interface for developing [Template](../transaction/manager/template) transactions
- Configuration class
- Session class
- Custom Mapper

**Relevant Classes**
- net.hasor.dbvisitor.jdbc.JdbcOperations
- net.hasor.dbvisitor.jdbc.core.JdbcTemplate
- net.hasor.dbvisitor.lambda.LambdaOperations
- net.hasor.dbvisitor.lambda.LambdaTemplate
- net.hasor.dbvisitor.transaction.TransactionTemplate
- net.hasor.dbvisitor.session.Configuration
- net.hasor.dbvisitor.session.Session
- net.hasor.dbvisitor.mapper.BaseMapper

## Configuration Items

| Property Name | Description |
|---|---|
| dbvisitor.mapper-locations | <TagGray/> Path to scan for Mapper mapping files. Default is `dbvisitor/mapper/*.xml`. |
| dbvisitor.mapper-packages | <TagGray/> Package names to scan for Mapper interface definitions. Use `,` to separate multiple packages. |
| dbvisitor.mapper-disabled | <TagGray/> Use `true/false` to disable Mapper interfaces scanned by `dbvisitor.mapper-packages`. <br/>Default is `false`. Consider setting to `true` if conflicts occur when sharing the same mapper file with other frameworks. |
| dbvisitor.marker-annotation | <TagGray/> Set a scan path so that only Mapper interfaces annotated with a specific annotation are recognized as Mapper interface classes. Default: `net.hasor.dbvisitor.mapper.MapperDef`. |
| dbvisitor.marker-interface | <TagGray/> Set a scan path so that only Mapper interfaces implementing a specific interface are recognized as Mapper interface classes. Default: `net.hasor.dbvisitor.mapper.Mapper`. |
| dbvisitor.auto-mapping | <TagGray/> Whether to automatically map all fields under the type to columns in the database. `true` means automatic. `false` means must be declared via `@Column` annotation. |
| dbvisitor.camel-case | <TagGray/> Convert table names and property names to underscored table and column names based on camel case rules. |
| dbvisitor.use-delimited | <TagGray/> Force adding identifier delimiters when generating table names/column names/index names. For example: set this property to solve the problem of column names being keywords. Default is `false` (not set). |
| dbvisitor.case-insensitive | <TagGray/> Whether table/column names are case-sensitive. Default `true` (insensitive). |
| dbvisitor.ignore-nonexist-statement | <TagGray/> Whether to ignore missing mappings during the mapping of Mapper interface methods to XML. Default is `false`. Missing mappings will report an error. |
| dbvisitor.dialect | <TagGray/> **[Database Dialect](../api/differences/about#dialect)** used by default. |
