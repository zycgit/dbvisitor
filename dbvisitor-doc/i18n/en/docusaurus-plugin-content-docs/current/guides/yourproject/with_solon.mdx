---
id: with_solon
sidebar_position: 4
hide_table_of_contents: true
title: 3.4 Solon Integration
description: Using dbVisitor ORM with Solon.
---
:::tip[Hint]
This article is generated by AI translation.
:::

import TagRed from '@site/src/components/tags/TagRed';
import TagGray from '@site/src/components/tags/TagGray';
import Vars from '@site/plugins/projectVars';

export const Highlight = ({children, color}) => (
  <span style={{ backgroundColor: color, borderRadius: '2px', color: '#fff', padding: '0.2rem', }}>{children}</span>
);

## What is Solon
An all-scenario Java enterprise framework: lean, efficient, and open. Concurrency +300%; memory -50%; startup 10x faster; package size -90%; compatible with Java 8 ~ 23. A Spring alternative.

- Solon project: https://solon.noear.org/

## Features

- Auto-configured DataSource
- Mapper interface injection
- Multiple DataSource
- Transaction support

## Setup

First add the dependency, current version: <Highlight color="rgb(227 17 108)">{Vars.lastReleaseVer}</Highlight>

```xml title='Maven dependencies'
<dependency>
    <groupId>net.hasor</groupId>
    <artifactId>dbvisitor-solon-plugin</artifactId>
    <version>latest version</version>
</dependency>
```

```xml title='Use HikariCP'
<dependency>
    <groupId>com.zaxxer</groupId>
    <artifactId>HikariCP</artifactId>
    <version>4.0.3</version>
</dependency>
```

```yaml title='Configuration'
solon.dataSources:
  default!:  # 数据源名称（尾部 ! 标识默认数据源）
    class: "com.zaxxer.hikari.HikariDataSource"
    jdbcUrl: "jdbc:mysql://127.0.0.1:13306/devtester?allowMultiQueries=true&user=root&password=123456"
dbvisitor:
  default:   # 对应的数据源名称
    mapperLocations: classpath:dbvisitor/mapper/*.xml
    mapperPackages: net.hasor.dbvisitor.test.dao.*
```

```java title='Inject a Mapper'
@Controller
public class HelloController {
  @Inject
  private UserMapper userMapper;

  @Get
  @Mapping("/hello")
  public String hello(String name) {
    return ...
  }
}
```

:::info[Example]
[Example project](https://gitee.com/zycgit/dbvisitor/tree/main/dbvisitor-example/solon/)
:::

## Inject types {#inject}

- `JdbcOperations` interface, implemented by [JdbcTemplate](../core/jdbc/about)
- `LambdaOperations` interface, implemented by [LambdaTemplate](../core/lambda/about)
- `Configuration`
- `Session`
- `Custom Mapper` interfaces

:::info[Inject tips]
- Types above support @Db and @Inject
- Use @Db("name") to select a data source when multiple are configured
:::

## Transactions {#tran}

```java title='Control transactions with @Tran'
import org.noear.solon.data.annotation.Tran;

public class TxExample {
    @Tran(policy = TranPolicy.required)
    public void exampleMethod() throws SQLException {
      ...
    }
}
```

## Configuration reference

| Key                      | Description                                                                                                                                   |
|-------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------|
| mapperLocations         | <TagGray/> Locations of Mapper XML files; default `dbvisitor/mapper/*.xml`                                                                     |
| mapperPackages          | <TagGray/> Packages to scan for Mapper interfaces; separate multiple with `,`                                                                   |
| mapperDisabled          | <TagGray/> `true/false` to disable Mapper interfaces discovered via `dbvisitor.mapper-packages`; default false. Set true if conflicts arise.     |
| markerAnnotation        | <TagGray/> Annotation that marks an interface as a Mapper; default `net.hasor.dbvisitor.mapper.MapperDef`                                       |
| markerInterface         | <TagGray/> Interface that marks an interface as a Mapper; default `net.hasor.dbvisitor.mapper.Mapper`                                          |
| autoMapping             | <TagGray/> Automatically map all fields to columns; true = auto, false = require @Column                                                        |
| camelCase               | <TagGray/> Convert table/column names using camel-case to underscore                                                                           |
| useDelimited            | <TagGray/> Force identifier quoting for table/column/index names (e.g., when names are keywords); default false                                |
| caseInsensitive         | <TagGray/> Case-insensitive table/column names; default true                                                                                   |
| ignoreNonExistStatement | <TagGray/> Ignore missing mappings when binding Mapper methods to XML; default false (throws)                                                  |
| dialect                 | <TagGray/> Default database dialect                                                                                                            |
