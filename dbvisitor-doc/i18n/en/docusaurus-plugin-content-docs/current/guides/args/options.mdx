---
id: options
sidebar_position: 7
hide_table_of_contents: true
title: 6.6 Argument Options
description: Learn about argument options and how to use them.
---
:::tip[Hint]
This article is generated by AI translation.
:::

import TagRed from '@site/src/components/tags/TagRed';
import TagGray from '@site/src/components/tags/TagGray';
import TagYellow from '@site/src/components/tags/TagYellow';

# Argument Options

Argument options fall into three categories:
- [General Options](./options#normal): common option effects and usage.
- [Stored Procedure Options](./options#call): options related to stored procedures.
- [Cursor Options](./options#cursor): extensions for cursor arguments and how to use them.

## General Options {#normal}

**javaType**, **typeHandler**, and **jdbcType** are the most common options and cover most needs.

| Name        | Type          | Description                                                                                  |
|-------------|---------------|----------------------------------------------------------------------------------------------|
| javaType    | Class         | <TagGray/> Java type of the argument.                                                        |
| jdbcType    | Integer       | <TagGray/> JDBC type of the argument; can be a `java.sql.JDBCType` enum name or numeric code. |
| typeHandler | TypeHandler   | <TagGray/> Type handler to use, overriding the default [TypeHandler](../types/about) choice.   |

```text title='Example 1: javaType option'
select * from users where name = #{name,javaType=java.lang.Integer}
```

- `javaType` can be any [Java type](../types/handlers/about#single_type) supported by the TypeHandlerRegistry.

```text title='Example 2: jdbcType option'
select * from users where name = #{name,jdbcType=varchar}
```

- `jdbcType` can be any [JDBC type](../types/handlers/about#single_type) supported by the TypeHandlerRegistry.

:::info
`javaType` and `jdbcType` can be combined to determine a specific **[TypeHandler](../types/handlers/about#mix_type)**.
:::

```text title='Example 3: typeHandler option'
select * from users where name =
            #{name,typeHandler=net.hasor.dbvisitor.types.handler.string.StringTypeHandler}
```

:::info
`typeHandler` explicitly selects the TypeHandler. dbVisitor ships with many built-in **[TypeHandler](../types/about)**.
:::

```text title='Example 4: Serialize/deserialize a JSON field'
select * 
from users 
where name = #{name,
            javaType= net.demos.UserDTO,
            typeHandler=net.hasor.dbvisitor.types.handler.json.JsonUseForFastjson2TypeHandler}
```

- By setting `javaType` and `typeHandler`, JSON fields can be auto-serialized/deserialized.

## Stored Procedure Options {#call}

Use the **mode** option to adapt different stored-procedure argument types.
- When `mode` is `IN`, it passes a value to the procedure (same usage as general options).
- When `mode` is `OUT` or `INOUT`, you can additionally use the options below.

| Name     | Type      | Description                                                                                                      |
|----------|-----------|------------------------------------------------------------------------------------------------------------------|
| mode     | SqlMode   | <TagYellow/> Direction of the argument; defaults to `IN`. Needed for stored-procedure OUT arguments.           |
| jdbcType | Integer   | <TagYellow/> JDBC type; can be a `java.sql.JDBCType` enum name or numeric code.                                  |
| name     | String    | <TagGray/> Name of the OUT argument in the result set. When mode is `INOUT`, can differentiate in/out names.    |
| typeName | String    | <TagGray/> Type name for the OUT argument; see `CallableStatement.registerOutParameter`.                         |
| scale    | Integer   | <TagGray/> Scale for the OUT argument; see `CallableStatement.registerOutParameter`.                             |

```text title='Example 1: IN argument'
{call test_procedure(#{arg, mode=in})} -- shorthand: {call test_procedure(#{arg})}
```

```text title='Example 2: OUT argument with JDBC VARCHAR'
{call test_procedure(#{arg, mode=out, jdbcType=varchar})}
```

```text title='Example 3: INOUT argument with JDBC VARCHAR'
{call test_procedure(#{arg, mode=inout, jdbcType=varchar})}
```

```text title='Example 4: OUT argument with jdbcType and typeName'
{call test_procedure(#{arg, mode=out, jdbcType=varchar, typeName=varchar2})}
```

```text title='Example 5: OUT argument with jdbcType and scale'
{call test_procedure(#{arg, mode=out, jdbcType=varchar, scale=3})}
```

:::info
When both **typeName** and **scale** are present, `typeName` takes precedence. Priority of common OUT option combos:
- `jdbcType` + `typeName` (highest)
- `jdbcType` + `scale`
- `jdbcType` alone (lowest)
- See `CallableStatement.registerOutParameter` for details.
:::

```text title='Example 6: OUT argument with custom TypeHandler'
{call test_procedure(#{arg, 
            mode=out,
            jdbcType=varchar,
            typeHandler=net.hasor.dataql.sqlproc.types.handler.StringAsMonthDayTypeHandler})
}
```

```text title='Example 7: Alias an INOUT argument and save the OUT result as outArg'
{call test_procedure(#{arg, name=outArg, mode=out, jdbcType=varchar})}
```

## Cursor Options {#cursor}

Cursor arguments are usually result sets exposed via stored-procedure `OUT` arguments. You can handle cursor data with `rowMapper`, `rowHandler`, or `extractor`.

| Name       | Type                 | Description                                                                                   |
|------------|----------------------|-----------------------------------------------------------------------------------------------|
| mode       | SqlMode              | <TagRed/> Must be set to `CURSOR` when using cursor arguments.                               |
| name       | String               | <TagGray/> Name of the cursor argument in the result set.                                    |
| javaType   | Class                | <TagGray/> Map the cursor result set to a Java type; see [Object Mapping](../core/mapping/about). |
| rowMapper  | RowMapper            | <TagGray/> Same as above; see [RowMapper](../result/for_mapper).                              |
| rowHandler | RowCallbackHandler   | <TagGray/> Same as above; see [RowCallbackHandler](../result/row_callback).                    |
| extractor  | ResultSetExtractor   | <TagGray/> Same as above; see [ResultSetExtractor](../result/for_extractor).                   |

```sql title='Oracle stored procedure that outputs a cursor'
create or replace procedure proc_out_cursor(
    userName in varchar2,
    tableCursor out sys_refcursor)
as
begin
    open tableCursor for select * from my_users where c_name = userName;
end;
```

```text title='Example 1: Map cursor to UserDTO'
{call proc_out_cursor(#{name},#{res,
            mode=cursor,
            javaType=net.demos.dto.UserDTO})}
```

```text title='Example 2: Map cursor with custom UserRowMapper'
{call proc_out_cursor(#{name},#{res,
            mode=cursor,
            rowMapper=net.demos.mapper.UserRowMapper})}
```

```text title='Example 3: Process cursor rows with UserRowHandler'
{call proc_out_cursor(#{name},#{res,
            mode=cursor,
            rowHandler=net.demos.handler.UserRowHandler})}
```

:::info
Because of `RowCallbackHandler` characteristics, processing cursor data with it does not produce a result set. See **[RowCallbackHandler](../result/row_callback)**.
:::

:::info
When **javaType**, **rowMapper**, **rowHandler**, and **extractor** appear together (or partially), only one takes effect.
- Priority: **javaType** > **rowMapper** > **rowHandler** > **extractor**.
:::
