---
id: sql_element
sidebar_position: 3
hide_table_of_contents: true
title: Document Tags
description: Mapper XML elements available in dbVisitor.
---
:::tip[Hint]
This article is generated by AI translation.
:::

import TagRed from '@site/src/components/tags/TagRed';
import TagGray from '@site/src/components/tags/TagGray';

# Document Tags

Document tags consist of the following:
- [&lt;select&gt;](./sql_element#select): configure SELECT.
- [&lt;update&gt; / &lt;delete&gt;](./sql_element#update_delete): configure UPDATE and DELETE.
- [&lt;insert&gt;](./sql_element#insert): configure INSERT.
- [&lt;selectKey&gt;](./sql_element#selectKey): inside &lt;insert&gt; to fetch generated keys without another query.
- [&lt;execute&gt;](./sql_element#execute): run arbitrary SQL.
- [&lt;sql&gt;](./sql_element#sql): define reusable SQL fragments.

## select tag {#select}

`<select>` equals [@Query](../annotation/query). For simple cases just write the SQL:

```xml title='Example 1: simple'
<select id="queryListByAge">
    select * from users where age = #{age}
</select>
```

```xml title='Example 2: map results via resultType'
<select id="queryById" resultType="com.example.dto.UserBean">
    select 
        id, name, age, create_time
    from
        users
    where
        id = #{id}
</select>
```

### Attributes

| Property            | Description                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
|---------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| id                  | <TagRed/> Identifier for the statement.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| statementType       | <TagGray/> How JDBC executes the query. Default `PREPARED`.<br/>- `STATEMENT` → `java.sql.Statement`<br/>- `PREPARED` → `java.sql.PreparedStatement`<br/>- `CALLABLE` → `java.sql.CallableStatement`                                                                                                                                                                                                                                                                                                                        |
| timeout             | <TagGray/> If >0 sets `java.sql.Statement.setQueryTimeout(int)` in seconds. Default `-1`.                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| fetchSize           | <TagGray/> If >0 sets `java.sql.Statement.setFetchSize(int)` as a hint for how many rows to fetch per round trip. Default `256`.                                                                                                                                                                                                                                                                                                                                                                                           |
| resultMap           | <TagGray/> Reference a mapping defined by [&lt;resultMap&gt;](./result_map) or [&lt;entity&gt;](./entity_map). Use either `resultMap` or `resultType`, not both. If neither is set, the mapper method return type is used.                                                                                                                                                                                                                                                                                                      |
| resultType          | <TagGray/> Fully qualified type or [type alias](./sort_type_name) for the result. For collections, use the element type, not the collection. Use either `resultMap` or `resultType`, not both. If neither is set, the mapper method return type is used.                                                                                                                                                                                                                                                                      |
| resultSetType       | <TagGray/> Value passed as `resultSetType` when creating the statement.<br/>Options: `FORWARD_ONLY`, `SCROLL_INSENSITIVE`, `SCROLL_SENSITIVE`, `DEFAULT` (default).<br/>- With `STATEMENT`: maps to `Connection.createStatement(int, int)` first arg.<br/>- With `PREPARED`: maps to `Connection.prepareStatement(String, int, int)` second arg.<br/>- With `CALLABLE`: maps to `Connection.prepareCall(String, int, int)` second arg.                                 |
| resultSetExtractor  | <TagGray/> Configure a [ResultSetExtractor](../../result/for_extractor) for result handling (ignored if `bindOut` is set).                                                                                                                                                                                                                                                                                                                                                                                                  |
| resultRowCallback   | <TagGray/> Configure a [RowCallbackHandler](../../result/row_callback) for result handling (ignored if `bindOut` is set).                                                                                                                                                                                                                                                                                                                                                                                                  |
| resultRowMapper     | <TagGray/> Configure a [RowMapper](../../result/for_mapper) for result handling (ignored if `bindOut` is set).                                                                                                                                                                                                                                                                                                                                                                                                            |
| resultTypeHandler   | <TagGray/> Configure a [TypeHandler](../../types/about) for result handling (ignored if `bindOut` is set).                                                                                                                                                                                                                                                                                                                                                                                                                  |
| bindOut             | <TagGray/> Bind output params when using [Multiple Results](../jdbc/multi) or [Stored Procedures](../jdbc/procedure). Requires mapper return type **Map&lt;String,Object&gt;**.                                                                                                                                                                                                                                                                                                                                                |

## update and delete tags {#update_delete}

`<update>` equals [@Update](../annotation/update); `<delete>` equals [@Delete](../annotation/delete). Configure UPDATE / DELETE SQL.

```xml
<update id="updateAge">
    update users set age = #{age} where id = #{id}
</update>

<delete id="deleteById">
    delete from users where id = #{id}
</delete>
```

### Attributes

| Property       | Description                                                                                                                                                    |
|----------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------|
| id             | <TagRed/> Identifier for the statement.                                                                                                                        |
| statementType  | <TagGray/> JDBC execution style. Default `PREPARED`.<br/>- `STATEMENT` → `java.sql.Statement`<br/>- `PREPARED` → `java.sql.PreparedStatement`<br/>- `CALLABLE` → `java.sql.CallableStatement` |
| timeout        | <TagGray/> If >0 sets `java.sql.Statement.setQueryTimeout(int)` in seconds. Default `-1`.                                                                      |

## insert tag {#insert}

`<insert>` equals [@Insert](../annotation/insert) to configure INSERT.

```xml
<insert id="insertUser">
    insert into users (
        id,    name,    age,    create_time
    ) values (
        #{id}, #{name}, #{age}, #{createTime}
    )
</insert>
```

### Attributes

| Property          | Description                                                                                                                                                    |
|-------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------|
| id                | <TagRed/> Identifier for the statement.                                                                                                                        |
| statementType     | <TagGray/> JDBC execution style. Default `PREPARED`.<br/>- `STATEMENT` → `java.sql.Statement`<br/>- `PREPARED` → `java.sql.PreparedStatement`<br/>- `CALLABLE` → `java.sql.CallableStatement` |
| timeout           | <TagGray/> If >0 sets `java.sql.Statement.setQueryTimeout(int)` in seconds. Default `-1`.                                                                      |
| useGeneratedKeys  | <TagGray/> Whether to use JDBC generated keys. Ignored if `SelectKeySql`/`@SelectKey` is also configured.                                                      |
| keyProperty       | <TagGray/> Bean property to fill when `useGeneratedKeys` is true. Ignored if `@SelectKey` is configured.                                                       |
| keyColumn         | <TagGray/> Result-set column used when `useGeneratedKeys` is true. Ignored if `@SelectKey` is configured.                                                      |

## selectKey tag {#selectKey}

`<selectKey>` works with `<insert>`, same as [@SelectKeySql](../annotation/insert#selectkey).

Use `<selectKey>` to fetch generated keys (or custom-generated keys) without an extra query when inserting.

```xml
<insert id="insertUser">
    <selectKey keyProperty="id" order="BEFORE">
        SELECT CONCAT('1', CEILING(RAND() * 1000 + 1000))
    </selectKey>
    insert into `test_user` (
        `id`, `name`, `age`, `create_time`
    ) values (
        #{id}, #{name}, #{age}, #{createTime}
    )
</insert>
```

### Attributes

| Property        | Description                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
|-----------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| keyProperty     | <TagRed/> Bean property to receive the generated key.                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| keyColumn       | <TagGray/> Column name used to read the generated key.                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| order           | <TagRed/> `BEFORE` or `AFTER`: when to run the key SQL relative to the INSERT.                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| statementType   | <TagGray/> JDBC execution style. Default `PREPARED`.<br/>- `STATEMENT` → `java.sql.Statement`<br/>- `PREPARED` → `java.sql.PreparedStatement`<br/>- `CALLABLE` → `java.sql.CallableStatement`                                                                                                                                                                                                                                                                                                                          |
| timeout         | <TagGray/> If >0 sets `java.sql.Statement.setQueryTimeout(int)` in seconds. Default `-1`.                                                                                                                                                                                                                                                                                                                                                                                                                              |
| fetchSize       | <TagGray/> If >0 sets `java.sql.Statement.setFetchSize(int)` as a hint for how many rows to fetch per round trip. Default `256`.                                                                                                                                                                                                                                                                                                                                                                                         |
| resultSetType   | <TagGray/> Value passed as `resultSetType` when creating the statement.<br/>Options: `FORWARD_ONLY`, `SCROLL_INSENSITIVE`, `SCROLL_SENSITIVE`, `DEFAULT` (default).<br/>- With `STATEMENT`: maps to `Connection.createStatement(int, int)` first arg.<br/>- With `PREPARED`: maps to `Connection.prepareStatement(String, int, int)` second arg.<br/>- With `CALLABLE`: maps to `Connection.prepareCall(String, int, int)` second arg.                                   |

## execute tag {#execute}

`<execute>` equals [@Execute](../annotation/execute) and runs arbitrary SQL.

```xml
<execute id="updateAge">
    update users set age = #{age} where id = #{id}
</execute>
```

### Attributes

| Property       | Description                                                                                                                                                    |
|----------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------|
| id             | <TagRed/> Identifier for the statement.                                                                                                                        |
| statementType  | <TagGray/> JDBC execution style. Default `PREPARED`.<br/>- `STATEMENT` → `java.sql.Statement`<br/>- `PREPARED` → `java.sql.PreparedStatement`<br/>- `CALLABLE` → `java.sql.CallableStatement` |
| timeout        | <TagGray/> If >0 sets `java.sql.Statement.setQueryTimeout(int)` in seconds. Default `-1`.                                                                      |
| bindOut        | <TagGray/> Filter output arguments; only the specified ones are accepted. If set, mapper return type must be **Map&lt;String,Object&gt;**.                       |

## sql tag {#sql}

Define SQL fragments and reuse them in the same mapper file (e.g., column lists).

```xml
<sql id="testuser_columns">
    name,age,create_time
</sql>

<insert id="insertUser">
    insert into `test_user` (
        <include refid="testuser_columns"/>
    ) values (
        #{name}, #{age}, now()
    )
</insert>
```

### Attributes

| Property | Description                   |
|----------|-------------------------------|
| id       | <TagRed/> Identifier for the fragment. |
