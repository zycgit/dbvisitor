---
id: insert
sidebar_position: 3
hide_table_of_contents: true
title: "@Insert"
description: The Insert annotation marks interface methods and accepts a string or string array that represents an INSERT statement.
---
:::tip[Hint]
This article is generated by AI translation.
:::

import TagRed from '@site/src/components/tags/TagRed';
import TagGray from '@site/src/components/tags/TagGray';

# @Insert Annotation

Marks an interface method to execute an INSERT statement.

:::info
If you pass a string array, the elements are concatenated with a single space between them.<br/>
String arrays make it easy to manage multi-line SQL.
:::

```java title='Example: insert a user record'
@SimpleMapper
public interface UserMapper {
    @Insert({ "insert into users (",                       // 1. SQL definition
              "    id, name, age, create_time",            //
              ") values (",                               //
              "    #{id}, #{name}, #{age}, #{createTime}", //
              ")" })
    int saveUser(UserDTO user);                           // 2. User object argument
}
```

## Properties

| Property          | Description                                                                                                                                                                                                |
|-------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| value             | <TagRed/> SQL to execute.                                                                                                                                                                                  |
| statementType     | <TagGray/> Determines which JDBC statement type to use. Default is `PREPARED`.<br/>- `STATEMENT` → `java.sql.Statement`<br/>- `PREPARED` → `java.sql.PreparedStatement`<br/>- `CALLABLE` → `java.sql.CallableStatement` |
| timeout           | <TagGray/> If set to a value greater than `0`, the value is applied to `java.sql.Statement.setQueryTimeout(int)` to enforce a timeout in seconds. Default is `-1`.                                         |
| useGeneratedKeys  | <TagGray/> Whether to use auto-generated keys.<br/>If `@SelectKeySql` is also present, this flag is ignored.                                                                                                |
| keyProperty       | <TagGray/> When `useGeneratedKeys` is true, specifies the bean property to receive the generated key. Ignored if `@SelectKeySql` is present.                                                               |
| keyColumn         | <TagGray/> When `useGeneratedKeys` is true, specifies the result-set column whose value is written back. Ignored if `@SelectKeySql` is present.                                                            |

:::info[Tip]
If `keyColumn` is empty, the first column of the returned result set is used.
:::

# @SelectKeySql Annotation {#selectkey}

Sometimes you need the generated primary key immediately after inserting a row for subsequent business logic. `@SelectKeySql` allows executing an additional SQL before or after the INSERT to retrieve the key value and **write it back to the parameter object**.

This annotation must be used together with `@Insert`.

```java title='Example: retrieve MySQL auto-increment ID after INSERT'
//create table users (
//  id          bigint auto_increment primary key,
//  name        varchar(255),
//  age         int,
//  create_time datetime
//);

@SimpleMapper
public interface UserMapper {
    @Insert({ "insert into users (",               // 1. SQL definition
              "    name, age, create_time",         //
              ") values (",                         //
              "    #{name}, #{age}, #{createTime}", //
              ")" })
    // After the INSERT executes, use MySQL last_insert_id() to retrieve the auto-increment ID and write it back to the id property
    @SelectKeySql(value = "select last_insert_id()", keyProperty = "id", order = Order.After)
    int saveUser(UserDTO user);
}

UserMapper mapper = ...;
UserDTO user = ...;

mapper.saveUser(user);

long afterId = user.getId(); // Auto-increment ID has been written back
```

## Properties

| Property        | Description                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
|-----------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| value           | <TagRed/> SQL that retrieves the generated key.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| keyProperty     | <TagRed/> Bean property that receives the generated key.                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| keyColumn       | <TagGray/> Result-set column whose value is written back.                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| order           | <TagRed/> Whether the key SQL runs `Before` or `After` the INSERT.                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| statementType   | <TagGray/> Determines which JDBC statement type to use. Default is `PREPARED`.<br/>- `STATEMENT` → `java.sql.Statement`<br/>- `PREPARED` → `java.sql.PreparedStatement`<br/>- `CALLABLE` → `java.sql.CallableStatement`                                                                                                                                                                                                                                                                                                               |
| timeout         | <TagGray/> If set to a value greater than `0`, the value is applied to `java.sql.Statement.setQueryTimeout(int)` to enforce a timeout in seconds. Default is `-1`.                                                                                                                                                                                                                                                                                                                                                                  |
| fetchSize       | <TagGray/> If set to a value greater than `0`, the value is applied to `java.sql.Statement.setFetchSize(int)` as a hint to the JDBC driver. Default is `256`.                                                                                                                                                                                                                                                                                                                                                                       |
| resultSetType   | <TagGray/> Controls the `resultSetType` argument when the statement is created.<br/>Options: `FORWARD_ONLY`, `SCROLL_INSENSITIVE`, `SCROLL_SENSITIVE`, `DEFAULT` (no override).<br/>- For `STATEMENT`, maps to `Connection.createStatement(int, int)` argument 1.<br/>- For `PREPARED`, maps to `Connection.prepareStatement(String, int, int)` argument 2.<br/>- For `CALLABLE`, maps to `Connection.prepareCall(String, int, int)` argument 2. |
