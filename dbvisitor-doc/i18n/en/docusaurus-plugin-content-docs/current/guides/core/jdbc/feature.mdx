---
id: feature
sidebar_position: 9
hide_table_of_contents: true
title: Advanced Features
description: Highlights useful JdbcTemplate options and arguments.
---
:::tip[Hint]
This article is generated by AI translation.
:::

import TOCInline from '@theme/TOCInline';

This section summarizes advanced JdbcTemplate features and knobs：

<TOCInline toc={toc} />

## Log SQL on Error {#stmterror}

Set **printStmtError** to log the SQL statement whenever an error occurs.
- Property: **printStmtError**
- Default: **false**

```text title='Example with printStmtError = true'
Failed SQL statement [select * from test_user2 where id > 10].
java.sql.SQLSyntaxErrorException: Table 'devtester.test_user2' doesn't exist
    ... stack trace ...
```

## Surface Database Warnings {#warnings}

Set **ignoreWarnings** to determine whether SQL warnings raise exceptions.
- Property: **ignoreWarnings**
- Default: **true** (warnings ignored)

```sql title='MySQL 8.0 warning example'
create table test_table (
    id   bigint,
    name national char(10)
);
```

```text title='Warning text'
NATIONAL/NCHAR/NVARCHAR implies the character set UTF8MB3 ...
```

```text title='With ignoreWarnings = false'
Exception in thread "main" java.sql.SQLException: Warning not ignored
    ... stack trace ...
```

## Query Timeout {#timeout}

Set **queryTimeout** to a value greater than zero to call `Statement.setQueryTimeout`.
- Property: **queryTimeout**
- Default: **0** (disabled)
- Unit: seconds

```java
jdbc.setQueryTimeout(6);
jdbc.queryForList("select * from users");
```

## fetchSize {#fetchsize}

Set **fetchSize** to hint how many rows to fetch per round-trip using `Statement.setFetchSize`.
- Property: **fetchSize**
- Default: **0** (driver default)
- Unit: rows

```java
jdbc.setFetchSize(256);
jdbc.queryForList("select * from users");
```

:::info[Driver-specific behavior]
```java title='MySQL streaming'
PreparedStatement ps = con.prepareStatement(
        "select * from test_user",
        ResultSet.TYPE_FORWARD_ONLY,
        ResultSet.CONCUR_READ_ONLY
    );
ps.setFetchSize(Integer.MIN_VALUE);
```

```java title='Postgres 7.4+'
con.setAutoCommit(false);
PreparedStatement ps = con.prepareStatement(
        "select * from test_user",
        ResultSet.TYPE_FORWARD_ONLY,
        ResultSet.CONCUR_READ_ONLY
    );
ps.setFetchSize(255);
```
:::

## maxRows {#maxrows}

Set **maxRows** to limit the maximum number of rows returned.
- Property: **maxRows**
- Default: **0** (no limit)
- Unit: rows

```java
jdbc.setMaxRows(200);
jdbc.queryForList("select * from users");
```

:::info[Note]
Some drivers still read the entire result set even if `maxRows` is reached (e.g., MySQL consumes extra rows but does not expose them).
:::

## Dynamic Data Sources {#dynamic}

When you cannot supply a `DataSource`/`Connection` up front—or each call must use a different source—implement `DynamicConnection`.

```java title='Custom DynamicConnection'
class LocalDynamicConnection implements DynamicConnection {
    @Override
    public Connection getConnection() throws SQLException {
        return ...;
    }

    @Override
    public void releaseConnection(Connection conn) throws SQLException {
        ...;
    }
}
```

```java title='Use the dynamic source'
JdbcTemplate jdbc = new JdbcTemplate(new LocalDynamicConnection());
```

:::info[Integration]
`SpringDsAdapter` relies on Spring's `DataSourceUtils` to obtain/release connections so dbVisitor cooperates with Spring's transaction manager. Add:
- _**[net.hasor:dbvisitor-spring](https://central.sonatype.com/artifact/net.hasor/dbvisitor-spring)**_
- _**[net.hasor:dbvisitor-spring-starter](https://central.sonatype.com/artifact/net.hasor/dbvisitor-spring-starter)**_
:::
