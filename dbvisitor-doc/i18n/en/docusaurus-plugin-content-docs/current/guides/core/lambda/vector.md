---
id: vector
sidebar_position: 8
hide_table_of_contents: true
title: Vector Query
description: Use LambdaTemplate for vector nearest-neighbor queries (KNN) and range filtering (ANN), supporting L2, Cosine, IP and other metric types.
---

:::tip[Hint]
This article is generated by AI translation.
:::

In AI and machine learning scenarios, unstructured data such as text, images, and audio are typically encoded by models into **high-dimensional vectors** (also called Embeddings).  
The **distance** between vectors measures the **semantic similarity** of the original data ‚Äî the closer the distance, the more semantically similar.

<svg viewBox="0 0 720 200" xmlns="http://www.w3.org/2000/svg" style={{maxWidth:'70%',height:'auto'}}>
  <defs>
    <marker id="ah" markerWidth="8" markerHeight="6" refX="8" refY="3" orient="auto"><path d="M0,0 L8,3 L0,6Z" fill="#555"/></marker>
  </defs>
  <rect x="20" y="30" width="160" height="140" rx="12" fill="#f0f4ff" stroke="#4a7cff" strokeWidth="1.5"/>
  <text x="100" y="22" textAnchor="middle" fontSize="13" fontWeight="bold" fill="#333">Raw Data</text>
  <text x="100" y="70" textAnchor="middle" fontSize="12" fill="#555">üê± Cat photo</text>
  <text x="100" y="100" textAnchor="middle" fontSize="12" fill="#555">üê∂ Dog photo</text>
  <text x="100" y="130" textAnchor="middle" fontSize="12" fill="#555">üöó Car photo</text>
  <text x="100" y="160" textAnchor="middle" fontSize="12" fill="#555">üìù A text passage</text>
  <line x1="190" y1="100" x2="270" y2="100" stroke="#555" strokeWidth="1.5" markerEnd="url(#ah)"/>
  <text x="230" y="90" textAnchor="middle" fontSize="11" fill="#777">Embedding</text>
  <text x="230" y="115" textAnchor="middle" fontSize="11" fill="#777">Model Encoding</text>
  <rect x="280" y="30" width="160" height="140" rx="12" fill="#f0fff4" stroke="#2da44e" strokeWidth="1.5"/>
  <text x="360" y="22" textAnchor="middle" fontSize="13" fontWeight="bold" fill="#333">Vector Space</text>
  <text x="360" y="65" textAnchor="middle" fontSize="11" fill="#555">[0.12, 0.85, ..., 0.33]</text>
  <text x="360" y="90" textAnchor="middle" fontSize="11" fill="#555">[0.15, 0.80, ..., 0.31]</text>
  <text x="360" y="115" textAnchor="middle" fontSize="11" fill="#555">[0.91, 0.02, ..., 0.77]</text>
  <text x="360" y="140" textAnchor="middle" fontSize="11" fill="#555">[0.45, 0.62, ..., 0.19]</text>
  <line x1="450" y1="100" x2="530" y2="100" stroke="#555" strokeWidth="1.5" markerEnd="url(#ah)"/>
  <text x="490" y="90" textAnchor="middle" fontSize="11" fill="#777">Distance</text>
  <text x="490" y="115" textAnchor="middle" fontSize="11" fill="#777">Similarity Ranking</text>
  <rect x="540" y="30" width="160" height="140" rx="12" fill="#fff8f0" stroke="#e5873a" strokeWidth="1.5"/>
  <text x="620" y="22" textAnchor="middle" fontSize="13" fontWeight="bold" fill="#333">Query Results</text>
  <text x="620" y="65" textAnchor="middle" fontSize="11" fill="#555">ü•á Cat (dist=0.05)</text>
  <text x="620" y="90" textAnchor="middle" fontSize="11" fill="#555">ü•à Dog (dist=0.12)</text>
  <text x="620" y="115" textAnchor="middle" fontSize="11" fill="#555">ü•â Text (dist=0.58)</text>
  <text x="620" y="140" textAnchor="middle" fontSize="11" fill="#555">‚ë£ Car (dist=0.91)</text>
</svg>

The core question of vector query is: **given a target vector, find the records in the database closest to it**.

## Distance Metrics {#metrics}

Different metrics suit different scenarios. dbVisitor supports 6 metrics:

<svg viewBox="0 0 720 320" xmlns="http://www.w3.org/2000/svg" style={{maxWidth:'70%',height:'auto'}}>
  <rect x="15" y="10" width="220" height="140" rx="10" fill="#f0f4ff" stroke="#4a7cff" strokeWidth="1.5"/>
  <text x="125" y="35" textAnchor="middle" fontSize="14" fontWeight="bold" fill="#4a7cff">L2 Euclidean Distance</text>
  <text x="125" y="58" textAnchor="middle" fontSize="11" fill="#555">Straight-line distance between two points</text>
  <text x="125" y="78" textAnchor="middle" fontSize="12" fill="#333" fontFamily="serif,STIXGeneral">d = ‚àöŒ£(a·µ¢ - b·µ¢)¬≤</text>
  <text x="125" y="100" textAnchor="middle" fontSize="11" fill="#777">Lower ‚Üí more similar</text>
  <text x="125" y="120" textAnchor="middle" fontSize="11" fill="#2da44e">‚úÖ General-purpose default</text>
  <text x="125" y="140" textAnchor="middle" fontSize="10" fill="#999">pgvector: &lt;-&gt;</text>
  <rect x="250" y="10" width="220" height="140" rx="10" fill="#f0fff4" stroke="#2da44e" strokeWidth="1.5"/>
  <text x="360" y="35" textAnchor="middle" fontSize="14" fontWeight="bold" fill="#2da44e">Cosine Distance</text>
  <text x="360" y="58" textAnchor="middle" fontSize="11" fill="#555">Complement of cosine of the angle</text>
  <text x="360" y="78" textAnchor="middle" fontSize="12" fill="#333" fontFamily="serif,STIXGeneral">d = 1 - cos(Œ∏)</text>
  <text x="360" y="100" textAnchor="middle" fontSize="11" fill="#777">Lower ‚Üí closer direction</text>
  <text x="360" y="120" textAnchor="middle" fontSize="11" fill="#2da44e">‚úÖ Text semantics / NLP</text>
  <text x="360" y="140" textAnchor="middle" fontSize="10" fill="#999">pgvector: &lt;=&gt;</text>
  <rect x="485" y="10" width="220" height="140" rx="10" fill="#fff8f0" stroke="#e5873a" strokeWidth="1.5"/>
  <text x="595" y="35" textAnchor="middle" fontSize="14" fontWeight="bold" fill="#e5873a">IP Inner Product</text>
  <text x="595" y="58" textAnchor="middle" fontSize="11" fill="#555">Dot product of vectors (negative for sorting)</text>
  <text x="595" y="78" textAnchor="middle" fontSize="12" fill="#333" fontFamily="serif,STIXGeneral">d = -Œ£(a·µ¢ √ó b·µ¢)</text>
  <text x="595" y="100" textAnchor="middle" fontSize="11" fill="#777">Lower ‚Üí larger inner product</text>
  <text x="595" y="120" textAnchor="middle" fontSize="11" fill="#2da44e">‚úÖ Recommendation systems</text>
  <text x="595" y="140" textAnchor="middle" fontSize="10" fill="#999">pgvector: &lt;#&gt;</text>
  <rect x="15" y="170" width="220" height="140" rx="10" fill="#fdf0ff" stroke="#a855f7" strokeWidth="1.5"/>
  <text x="125" y="195" textAnchor="middle" fontSize="14" fontWeight="bold" fill="#a855f7">Hamming Distance</text>
  <text x="125" y="218" textAnchor="middle" fontSize="11" fill="#555">Number of differing bits</text>
  <text x="125" y="238" textAnchor="middle" fontSize="12" fill="#333">For binary vectors</text>
  <text x="125" y="260" textAnchor="middle" fontSize="11" fill="#777">Lower ‚Üí more similar</text>
  <text x="125" y="280" textAnchor="middle" fontSize="11" fill="#2da44e">‚úÖ Hash / fingerprint matching</text>
  <text x="125" y="300" textAnchor="middle" fontSize="10" fill="#999">pgvector: &lt;~&gt;</text>
  <rect x="250" y="170" width="220" height="140" rx="10" fill="#f0ffff" stroke="#0ea5e9" strokeWidth="1.5"/>
  <text x="360" y="195" textAnchor="middle" fontSize="14" fontWeight="bold" fill="#0ea5e9">Jaccard Distance</text>
  <text x="360" y="218" textAnchor="middle" fontSize="11" fill="#555">Complement of intersection-over-union</text>
  <text x="360" y="238" textAnchor="middle" fontSize="12" fill="#333">d = 1 - |A‚à©B| / |A‚à™B|</text>
  <text x="360" y="260" textAnchor="middle" fontSize="11" fill="#777">Lower ‚Üí more similar</text>
  <text x="360" y="280" textAnchor="middle" fontSize="11" fill="#2da44e">‚úÖ Set / tag similarity</text>
  <text x="360" y="300" textAnchor="middle" fontSize="10" fill="#999">pgvector: &lt;%&gt;</text>
  <rect x="485" y="170" width="220" height="140" rx="10" fill="#fffff0" stroke="#ca8a04" strokeWidth="1.5"/>
  <text x="595" y="195" textAnchor="middle" fontSize="14" fontWeight="bold" fill="#ca8a04">BM25</text>
  <text x="595" y="218" textAnchor="middle" fontSize="11" fill="#555">Term-frequency-based text relevance</text>
  <text x="595" y="238" textAnchor="middle" fontSize="12" fill="#333">Classic IR scoring</text>
  <text x="595" y="260" textAnchor="middle" fontSize="11" fill="#777">Lower ‚Üí more relevant</text>
  <text x="595" y="280" textAnchor="middle" fontSize="11" fill="#2da44e">‚úÖ Full-text search</text>
  <text x="595" y="300" textAnchor="middle" fontSize="10" fill="#999">pgvector: &lt;?&gt;</text>
</svg>

:::tip[How to choose a metric]
- **When unsure**, choose L2 (Euclidean distance) ‚Äî the most general-purpose metric.
- **Text semantic search** ‚Üí Cosine, which only considers direction, not vector magnitude. Ideal for normalized embeddings.
- **Recommendation / ranking** ‚Üí IP (Inner Product). When vectors are normalized, IP results are equivalent to Cosine similarity.
:::

## Two Query Modes {#modes}

dbVisitor provides two vector search modes, corresponding to SQL `ORDER BY` and `WHERE`:

<svg viewBox="0 0 720 280" xmlns="http://www.w3.org/2000/svg" style={{maxWidth:'70%',height:'auto'}}>
  <rect x="15" y="10" width="340" height="260" rx="12" fill="#f0f4ff" stroke="#4a7cff" strokeWidth="2"/>
  <text x="185" y="38" textAnchor="middle" fontSize="16" fontWeight="bold" fill="#4a7cff">KNN Sort Mode (orderBy*)</text>
  <text x="185" y="60" textAnchor="middle" fontSize="12" fill="#555">Return the K closest records</text>
  <circle cx="170" cy="150" r="80" fill="none" stroke="#ccc" strokeWidth="1" strokeDasharray="4,4"/>
  <circle cx="170" cy="150" r="50" fill="none" stroke="#ccc" strokeWidth="1" strokeDasharray="4,4"/>
  <circle cx="170" cy="150" r="20" fill="none" stroke="#ccc" strokeWidth="1" strokeDasharray="4,4"/>
  <text x="170" y="155" textAnchor="middle" fontSize="18" fill="#e53e3e">‚äï</text>
  <text x="170" y="172" textAnchor="middle" fontSize="9" fill="#e53e3e">target</text>
  <circle cx="155" cy="135" r="5" fill="#4a7cff"/><text x="163" y="131" fontSize="9" fill="#4a7cff">‚ë†</text>
  <circle cx="190" cy="140" r="5" fill="#4a7cff"/><text x="198" y="136" fontSize="9" fill="#4a7cff">‚ë°</text>
  <circle cx="145" cy="165" r="5" fill="#4a7cff"/><text x="153" y="161" fontSize="9" fill="#4a7cff">‚ë¢</text>
  <circle cx="120" cy="120" r="4" fill="#aaa"/>
  <circle cx="230" cy="180" r="4" fill="#aaa"/>
  <circle cx="100" cy="190" r="4" fill="#aaa"/>
  <circle cx="250" cy="110" r="4" fill="#aaa"/>
  <circle cx="210" cy="210" r="4" fill="#aaa"/>
  <text x="185" y="252" textAnchor="middle" fontSize="11" fill="#333">Sort by distance, take top K (blue)</text>
  <text x="185" y="268" textAnchor="middle" fontSize="11" fill="#777">SQL: ORDER BY embedding &lt;-&gt; ? LIMIT K</text>
  <rect x="370" y="10" width="340" height="260" rx="12" fill="#f0fff4" stroke="#2da44e" strokeWidth="2"/>
  <text x="540" y="38" textAnchor="middle" fontSize="16" fontWeight="bold" fill="#2da44e">Range Filter Mode (vectorBy*)</text>
  <text x="540" y="60" textAnchor="middle" fontSize="12" fill="#555">Return all records within threshold distance</text>
  <circle cx="530" cy="150" r="75" fill="#2da44e" fillOpacity="0.08" stroke="#2da44e" strokeWidth="2" strokeDasharray="6,3"/>
  <text x="610" y="88" fontSize="10" fill="#2da44e">threshold</text>
  <line x1="530" y1="150" x2="605" y2="150" stroke="#2da44e" strokeWidth="1" strokeDasharray="3,3"/>
  <text x="530" y="155" textAnchor="middle" fontSize="18" fill="#e53e3e">‚äï</text>
  <text x="530" y="172" textAnchor="middle" fontSize="9" fill="#e53e3e">target</text>
  <circle cx="510" cy="130" r="5" fill="#2da44e"/><text x="518" y="126" fontSize="9" fill="#2da44e">‚úì</text>
  <circle cx="555" cy="140" r="5" fill="#2da44e"/><text x="563" y="136" fontSize="9" fill="#2da44e">‚úì</text>
  <circle cx="520" cy="170" r="5" fill="#2da44e"/><text x="528" y="166" fontSize="9" fill="#2da44e">‚úì</text>
  <circle cx="560" cy="175" r="5" fill="#2da44e"/><text x="568" y="171" fontSize="9" fill="#2da44e">‚úì</text>
  <circle cx="470" cy="100" r="4" fill="#aaa"/><text x="478" y="97" fontSize="9" fill="#aaa">‚úó</text>
  <circle cx="620" cy="200" r="4" fill="#aaa"/><text x="628" y="197" fontSize="9" fill="#aaa">‚úó</text>
  <circle cx="450" cy="200" r="4" fill="#aaa"/><text x="458" y="197" fontSize="9" fill="#aaa">‚úó</text>
  <text x="540" y="252" textAnchor="middle" fontSize="11" fill="#333">All inside the circle returned (green), outside discarded (grey)</text>
  <text x="540" y="268" textAnchor="middle" fontSize="11" fill="#777">SQL: WHERE embedding &lt;-&gt; ? &lt; threshold</text>
</svg>

| Comparison     | KNN (`orderBy*`)                     | Range (`vectorBy*`)               |
|:--------------|:-------------------------------------|:----------------------------------|
| SQL position  | `ORDER BY`                           | `WHERE`                           |
| Result count  | Fixed K rows (use with `initPage`)   | Variable, depends on threshold    |
| Use case      | "Find the N most similar"            | "Find all within distance range"  |
| Composability | Can add WHERE conditions for pre-filtering | Freely combine with other WHERE conditions |

## Preparation {#prepare}

### 1. Create Table

Using PostgreSQL + pgvector as an example, install the `vector` extension and create a vector column:

```sql
CREATE EXTENSION IF NOT EXISTS vector;

CREATE TABLE product_vector (
    id        SERIAL PRIMARY KEY,
    name      VARCHAR(100),
    embedding vector(128)   -- 128-dimensional vector
);
```

### 2. Entity Mapping

```java title='Vector entity class'
@Table("product_vector")
public class ProductVector {
    @Column(primary = true)
    private Integer id;
    private String name;

    @Column(typeHandler = PgVectorTypeHandler.class)
    private List<Float> embedding;

    // getter / setter ...
}
```

- Vector fields use `List<Float>` for representation.
- A `typeHandler` must be specified for vector fields to handle conversion between `List<Float>` and the database vector type.

:::info[Tip]
`PgVectorTypeHandler` is an implementation for PostgreSQL pgvector, using `PGobject` to convert between `List<Float>` and the `vector` type.
For other databases (e.g., Milvus), use the corresponding TypeHandler.
:::

### 3. Vector Parameter Format

In KNN sort queries (`orderBy*` series), the vector parameter needs to be a **database-recognizable type**.  
For pgvector, you cannot pass `List<Float>` directly ‚Äî it must be wrapped as a `PGobject`:

```java title='Construct vector query parameter (pgvector)'
PGobject vectorParam = new PGobject();
vectorParam.setType("vector");
vectorParam.setValue("[0.1,0.2,0.3,...]"); // pgvector text format
```

In Range filter queries (`vectorBy*` series), the vector parameter is automatically converted through the entity mapping's `TypeHandler`, so you can pass `List<Float>` directly.

## KNN Nearest-Neighbor Search {#knn}

Use `orderBy*` methods to sort by vector distance and return the K records closest to the target.

### L2 Euclidean Distance

```java title='Sort by L2 distance'
LambdaTemplate lambda = ...
Object target = ...; // target vector (PGobject or database-specific type)

List<ProductVector> results = lambda.query(ProductVector.class)
        .orderByL2(ProductVector::getEmbedding, target)
        .queryForList();

// Equivalent SQL (pgvector):
//   SELECT * FROM product_vector ORDER BY embedding <-> ? ASC
```

### Cosine Distance

```java title='Sort by Cosine distance'
List<ProductVector> results = lambda.query(ProductVector.class)
        .orderByCosine(ProductVector::getEmbedding, target)
        .queryForList();

// Equivalent SQL (pgvector):
//   SELECT * FROM product_vector ORDER BY embedding <=> ? ASC
```

### IP Inner Product Distance

```java title='Sort by Inner Product distance'
List<ProductVector> results = lambda.query(ProductVector.class)
        .orderByIP(ProductVector::getEmbedding, target)
        .queryForList();

// Equivalent SQL (pgvector):
//   SELECT * FROM product_vector ORDER BY embedding <#> ? ASC
```

:::info[IP Distance Note]
pgvector's `<#>` operator returns the **negative inner product**. After sorting, the record with the largest inner product (most similar) comes first.
:::

### Top-K Query

Combine with `initPage` to return only the K nearest records:

```java title='Top-K nearest neighbors'
int topK = 5;

List<ProductVector> results = lambda.query(ProductVector.class)
        .orderByL2(ProductVector::getEmbedding, target)
        .initPage(topK, 0)    // take only top 5
        .queryForList();
```

### Generic Metric Interface

Use `orderByMetric` with the `MetricType` enum to dynamically specify the metric:

```java title='Using MetricType enum'
import net.hasor.dbvisitor.lambda.core.MetricType;

List<ProductVector> results = lambda.query(ProductVector.class)
        .orderByMetric(MetricType.L2, ProductVector::getEmbedding, target)
        .queryForList();
```

See the **[Distance Metrics](./vector#metrics)** section above for all available metrics.

| MetricType          | Shortcut method    | pgvector operator |
|:--------------------|:------------------|:--------------|
| `MetricType.L2`     | `orderByL2`       | `<->`         |
| `MetricType.COSINE` | `orderByCosine`   | `<=>`         |
| `MetricType.IP`     | `orderByIP`       | `<#>`         |
| `MetricType.HAMMING`| `orderByHamming`  | `<~>`         |
| `MetricType.JACCARD`| `orderByJaccard`  | `<%>`         |
| `MetricType.BM25`   | `orderByBM25`     | `<?>`         |

## Range Search {#range}

Use `vectorBy*` methods to return only records whose distance to the target vector is less than the threshold. These are **WHERE conditions** that can be freely combined with other conditions.

### L2 Distance Filtering

```java title='L2 distance range filter'
List<Float> target = ...;   // can use List<Float> directly
double threshold = 5.0;

List<ProductVector> results = lambda.query(ProductVector.class)
        .vectorByL2(ProductVector::getEmbedding, target, threshold)
        .queryForList();

// Equivalent SQL (pgvector):
//   SELECT * FROM product_vector WHERE embedding <-> ? < ?
```

### Cosine Distance Filtering

```java title='Cosine distance range filter'
List<ProductVector> results = lambda.query(ProductVector.class)
        .vectorByCosine(ProductVector::getEmbedding, target, 0.1)
        .queryForList();

// Equivalent SQL (pgvector):
//   SELECT * FROM product_vector WHERE embedding <=> ? < ?
```

### IP Distance Filtering

```java title='IP distance range filter'
List<ProductVector> results = lambda.query(ProductVector.class)
        .vectorByIP(ProductVector::getEmbedding, target, -50.0)
        .queryForList();
```

:::info[vectorBy vs orderBy parameter differences]
`vectorBy*` vector parameters are automatically converted through the entity mapping's TypeHandler, so **you can pass `List<Float>` directly**.  
`orderBy*` vector parameters go directly into SQL parameter binding and need to be a database-recognizable type (e.g., `PGobject`).
:::

### Condition Toggle

All `vectorBy*` methods support a `boolean` first parameter to control whether the condition is active:

```java title='Dynamically control vector filtering'
boolean enableVectorFilter = ...;

List<ProductVector> results = lambda.query(ProductVector.class)
        .vectorByL2(enableVectorFilter, ProductVector::getEmbedding, target, threshold)
        .queryForList();

// When enableVectorFilter = false, the vector filter condition will not appear in the SQL
```

## Combined Queries {#combine}

Vector queries can be freely combined with scalar conditions to achieve **filter-then-sort** or **sort-then-filter**.

### KNN + Scalar Filtering

```java title='KNN search within a specific category'
List<ProductVector> results = lambda.query(ProductVector.class)
        .likeRight(ProductVector::getName, "Cat-A")            // scalar condition
        .orderByL2(ProductVector::getEmbedding, target)        // vector sort
        .initPage(3, 0)                                        // Top-3
        .queryForList();

// Equivalent SQL (pgvector):
//   SELECT * FROM product_vector
//    WHERE name LIKE 'Cat-A%'
//    ORDER BY embedding <-> ?
//    LIMIT 3
```

### Range + Scalar Filtering

```java title='Vector range filter + scalar condition'
List<ProductVector> results = lambda.query(ProductVector.class)
        .likeRight(ProductVector::getName, "R-A")              // scalar condition
        .vectorByL2(ProductVector::getEmbedding, target, 6.0)  // vector range filter
        .queryForList();

// Equivalent SQL (pgvector):
//   SELECT * FROM product_vector
//    WHERE name LIKE 'R-A%'
//      AND embedding <-> ? < ?
```

## Basic Operations {#crud}

Vector data insert, update, and delete operations are identical to regular entities. The TypeHandler automatically handles serialization and deserialization of `List<Float>`.

```java title='Insert vector'
ProductVector p = new ProductVector();
p.setId(1001);
p.setName("sample");
p.setEmbedding(Arrays.asList(0.1f, 0.2f, 0.3f, ...)); // 128 dimensions

lambda.insert(ProductVector.class)
      .applyEntity(p)
      .executeSumResult();
```

```java title='Update vector'
List<Float> newVec = Arrays.asList(0.9f, 0.8f, 0.7f, ...);

lambda.update(ProductVector.class)
      .eq(ProductVector::getId, 1001)
      .updateTo(ProductVector::getEmbedding, newVec)
      .doUpdate();
```

```java title='Read vector'
ProductVector loaded = lambda.query(ProductVector.class)
        .eq(ProductVector::getId, 1001)
        .queryForObject();

List<Float> vec = loaded.getEmbedding(); // automatically deserialized to List<Float>
```

## API Reference {#api}

### KNN Sort (QueryFunc Interface)

| Method                                               | Description              |
|:-----------------------------------------------------|:------------------------|
| `orderByL2(P property, Object vector)`               | Sort by L2 distance      |
| `orderByCosine(P property, Object vector)`           | Sort by Cosine distance  |
| `orderByIP(P property, Object vector)`               | Sort by IP distance      |
| `orderByHamming(P property, Object vector)`          | Sort by Hamming distance |
| `orderByJaccard(P property, Object vector)`          | Sort by Jaccard distance |
| `orderByBM25(P property, Object vector)`             | Sort by BM25 score       |
| `orderByMetric(MetricType, P property, Object vector)` | Specify metric via enum |

### Range Search (QueryCompare Interface)

| Method                                                           | Description               |
|:-----------------------------------------------------------------|:--------------------------|
| `vectorByL2(P property, Object vector, Number threshold)`        | L2 distance less than threshold    |
| `vectorByCosine(P property, Object vector, Number threshold)`    | Cosine distance less than threshold |
| `vectorByIP(P property, Object vector, Number threshold)`        | IP distance less than threshold    |
| `vectorByHamming(P property, Object vector, Number threshold)`   | Hamming distance less than threshold |
| `vectorByJaccard(P property, Object vector, Number threshold)`   | Jaccard distance less than threshold |
| `vectorByBM25(P property, Object vector, Number threshold)`      | BM25 distance less than threshold  |

All `vectorBy*` methods also support the `(boolean test, P property, Object vector, Number threshold)` overload for dynamically controlling whether the condition is active.

Related classes:
- net.hasor.dbvisitor.lambda.core.MetricType
- net.hasor.dbvisitor.lambda.core.QueryFunc
- net.hasor.dbvisitor.lambda.core.QueryCompare
