---
id: v6.3.1
sidebar_position: 990
title: v6.3.1 (2025-12-13)
---

# v6.3.1 (2025-12-13)

```xml
<dependency>
    <groupId>net.hasor</groupId>
    <artifactId>dbvisitor</artifactId>
    <version>6.3.1</version>
</dependency>
<dependency>
    <groupId>net.hasor</groupId>
    <artifactId>jdbc-mongo</artifactId>
    <version>6.3.1</version>
</dependency>
```

## 影响范围

- dbvisitor-driver JDBC 驱动及 GeneratedKeys 相关特性
- [jdbc-mongo 驱动](../../guides/drivers/mongo/usecase) 与 MongoDialect
- TypeHandlerRegistry 及 Offset* 类型、BSON 类型处理器
- LambdaTemplate freedom 模式的 Map 转换

## 更新内容

- 新增
  - `jdbc-mongo` 与 `dbvisitor-driver` 支持 `Statement.RETURN_GENERATED_KEYS`，插入后可以自动回填 Mongo `_id` 并通过标准 JDBC 接口读取 generatedKeys。
  - `jdbc-mongo` 支持 `/*+hint*/` 语法以及 `override_find_limit`、`override_find_skip`、`override_find_as_count` 选项，实现 Mongo 查询的无侵入分页 hint 能力。
  - `TypeHandlerRegistry` 新增基于 `ResolvableType` 的构造路径，并提供 `BsonTypeHandler`、`BsonListTypeHandler`，可以直接映射 MongoDB 复杂嵌套结构。
- 优化
  - 优化 `OffsetTime` / `OffsetDateTime` 类型处理，统一兼容 Timestamp、Instant、字符串等多种返回值，跨数据库读写 Offset 类型更可靠。
  - `JdbcDriver` 兼容标准 JDBC 行为，支持 `user` 属性并在遇到非 dbvisitor URL 时返回 `null`，方便与其它驱动协作。
- 修复
  - 修复 MongoDB 在使用 LambdaTemplate 和 Mapper 接口时，分页功能失效的问题。
  - 修复 `MapMappingResultSetExtractor` 在 `LambdaTemplate` freedom 模式且未配置映射时无法转换为 `Map` 的问题。
  - 修复 Mongo 命令构建器在 `valueTerm` 参数场景下丢失参数值，以及 `@Column` 在 `jdbcType` 传入负数时解析失败的问题。
