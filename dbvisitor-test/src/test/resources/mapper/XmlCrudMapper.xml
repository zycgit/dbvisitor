<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//dbvisitor.net//DTD Mapper 1.0//EN"
        "https://www.dbvisitor.net/schema/dbvisitor-mapper.dtd">
<mapper namespace="xmltest.CrudMapper">

    <resultMap id="simpleResultMap" type="net.hasor.dbvisitor.test.model.UserInfo">
        <result column="id" property="id"/>
        <result column="name" property="name"/>
        <result column="age" property="age"/>
        <result column="email" property="email"/>
        <result column="create_time" property="createTime"/>
    </resultMap>

    <!-- insert -->
    <insert id="insertUser">
        INSERT INTO user_info (id, name, age, email, create_time)
        VALUES (#{id}, #{name}, #{age}, #{email}, CURRENT_TIMESTAMP)
    </insert>

    <!-- select single by resultMap -->
    <select id="selectById" resultMap="simpleResultMap">
        SELECT * FROM user_info WHERE id = #{id}
    </select>

    <!-- select list by resultType entity -->
    <select id="selectAll" resultType="net.hasor.dbvisitor.test.model.UserInfo">
        SELECT * FROM user_info WHERE name LIKE 'XmlCrud%' ORDER BY id
    </select>

    <!-- select list by resultType map -->
    <select id="selectAllAsMap" resultType="map">
        SELECT * FROM user_info WHERE name LIKE 'XmlCrud%' ORDER BY id
    </select>

    <!-- select count by resultType int -->
    <select id="countAll" resultType="int">
        SELECT COUNT(*) FROM user_info WHERE name LIKE 'XmlCrud%'
    </select>

    <!-- select single column by resultType string -->
    <select id="selectNames" resultType="string">
        SELECT name FROM user_info WHERE name LIKE 'XmlCrud%' ORDER BY id
    </select>

    <!-- update -->
    <update id="updateEmail">
        UPDATE user_info SET email = #{email} WHERE id = #{id}
    </update>

    <!-- delete -->
    <delete id="deleteById">
        DELETE FROM user_info WHERE id = #{id}
    </delete>

    <!-- execute (DDL/DML) -->
    <execute id="deleteByName">
        DELETE FROM user_info WHERE name LIKE #{name}
    </execute>

    <!-- select for pagination -->
    <select id="selectForPage" resultMap="simpleResultMap">
        SELECT * FROM user_info WHERE name LIKE 'XmlCrud%' ORDER BY id
    </select>

</mapper>
