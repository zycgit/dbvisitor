<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//dbvisitor.net//DTD Mapper 1.0//EN"
        "https://www.dbvisitor.net/schema/dbvisitor-mapper.dtd">
<mapper namespace="xmltest.StatementAttrMapper">

    <resultMap id="userResultMap" type="net.hasor.dbvisitor.test.oneapi.model.UserInfo">
        <id column="id" property="id"/>
        <result column="name" property="name"/>
        <result column="age" property="age"/>
        <result column="email" property="email"/>
        <result column="create_time" property="createTime"/>
    </resultMap>

    <insert id="insertUser">
        INSERT INTO user_info (id, name, age, email, create_time)
        VALUES (#{id}, #{name}, #{age}, #{email}, CURRENT_TIMESTAMP)
    </insert>

    <!-- 默认 PREPARED 类型 -->
    <select id="selectPrepared" resultMap="userResultMap">
        SELECT * FROM user_info WHERE id = #{id}
    </select>

    <!-- 显式 PREPARED 类型 -->
    <select id="selectExplicitPrepared" resultMap="userResultMap" statementType="PREPARED">
        SELECT * FROM user_info WHERE id = #{id}
    </select>

    <!-- STATEMENT 类型（非预编译） -->
    <select id="selectStatement" resultMap="userResultMap" statementType="STATEMENT">
        SELECT * FROM user_info WHERE name LIKE 'StmtAttr%' ORDER BY id
    </select>

    <!-- timeout 超时设置 -->
    <select id="selectWithTimeout" resultMap="userResultMap" timeout="30">
        SELECT * FROM user_info WHERE name LIKE 'StmtAttr%' ORDER BY id
    </select>

    <!-- fetchSize 设置 -->
    <select id="selectWithFetchSize" resultMap="userResultMap" fetchSize="5">
        SELECT * FROM user_info WHERE name LIKE 'StmtAttr%' ORDER BY id
    </select>

    <!-- resultSetType 设置 -->
    <select id="selectForwardOnly" resultMap="userResultMap" resultSetType="FORWARD_ONLY">
        SELECT * FROM user_info WHERE name LIKE 'StmtAttr%' ORDER BY id
    </select>

    <select id="selectScrollInsensitive" resultMap="userResultMap" resultSetType="SCROLL_INSENSITIVE">
        SELECT * FROM user_info WHERE name LIKE 'StmtAttr%' ORDER BY id
    </select>

    <!-- 组合属性 -->
    <select id="selectCombined" resultMap="userResultMap"
            statementType="PREPARED" timeout="30" fetchSize="10" resultSetType="FORWARD_ONLY">
        SELECT * FROM user_info WHERE name LIKE 'StmtAttr%' ORDER BY id
    </select>

    <!-- insert 的 statementType（使用默认 PREPARED 但显式标注） -->
    <insert id="insertWithStatement" statementType="PREPARED">
        INSERT INTO user_info (id, name, age, email, create_time)
        VALUES (#{id}, #{name}, #{age}, #{email}, CURRENT_TIMESTAMP)
    </insert>

</mapper>
